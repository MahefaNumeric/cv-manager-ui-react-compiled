(this["webpackJsonp@mahefa/cvmanager-ui"]=this["webpackJsonp@mahefa/cvmanager-ui"]||[]).push([[16],{689:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t,e){var n=null;if("string"===typeof t)n=t;else if(Array.isArray(t))n=o(t);else{if("undefined"!=typeof t)throw console.log("StringUtils::convertToStringAndToQueryParms, ids param type unkown",t),new Error("StringUtils::convertToStringAndToQueryParms, ids param type unkown");n=""}return void 0!==e&&null!==e?n?"".concat(e,"=").concat(n):"":n},o=function(t){return t.length>0?t.join(","):void 0}},690:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f}));var r=n(187),o=n(188),i=n(189),c=n(190),a=n(1),s=n.n(a),l=n(683),u=n(24),d=function(t){Object(i.a)(n,t);var e=Object(c.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var t=this.props,e=t.item,n=(t.index,t.clickHandlers),r=t.vertical;return Object(u.jsx)("td",{children:Object(u.jsxs)(l.CButtonGroup,{vertical:r,style:{minWidth:r?78:null},children:[this.renderButtonView(e),n&&n.downloadHandler&&Object(u.jsx)(l.CButton,{color:"success",variant:"outline",shape:"square",size:"sm",onClick:function(){return n.downloadHandler(e)},children:"Download"}),Object(u.jsx)(l.CButton,{color:"primary",variant:"outline",shape:"square",size:"sm",onClick:function(){return n.editHandler(e)},children:"Edit"}),Object(u.jsx)(l.CButton,{color:"danger",variant:"outline",shape:"square",size:"sm",onClick:function(){return n.deleteHandler(e)},children:"Del"})]})})}},{key:"renderButtonView",value:function(t){var e=this.props,n=(e.index,e.clickHandlers),r=(e.vertical,e.viewDropdown),o=r&&Array.isArray(r)&&r.length>0,i=function(e){return Object(u.jsx)(l.CButton,{color:"primary",variant:1==e?"ghost":"outline",shape:"square",size:"sm",style:{width:"100%"},onClick:function(){return n.viewHandler(t)},children:"View"})};return o?Object(u.jsxs)(l.CDropdown,{children:[Object(u.jsx)(l.CDropdownToggle,{split:!0,color:"primary",variant:"outline",shape:"square",size:"sm",style:{padding:0},children:i(o)}),Object(u.jsx)(l.CDropdownMenu,{children:r.map((function(e){return Object(u.jsx)(l.CDropdownItem,{onClick:function(){return e.action(t)},children:e.text})}))})]}):i(o)}}]),n}(s.a.Component),h=function(t,e,n){return Object(u.jsx)("td",{children:t[n]?Object(u.jsx)("div",{dangerouslySetInnerHTML:{__html:t[n]}}):f(null)})},f=function(t){return t||Object(u.jsx)("em",{children:"(empty)"})}},692:function(t,e,n){"use strict";var r=n(187),o=n(188),i=n(189),c=n(190),a=n(1),s=n.n(a),l=n(683),u=n(24),d=function(t){Object(i.a)(n,t);var e=Object(c.a)(n);function n(){var t;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(t=e.call.apply(e,[this].concat(i))).state={show:!1,title:"",text:"",onOk:null,withCancelButton:!0},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.ref;t&&t(this)}},{key:"render",value:function(){var t=this,e=this.state,n=e.title,r=e.text,o=e.show,i=e.onOk,c=e.withCancelButton;return Object(u.jsxs)(l.CModal,{show:o,onClose:this.onCancel.bind(this),children:[Object(u.jsx)(l.CModalHeader,{closeButton:!0,children:Object(u.jsx)(l.CModalTitle,{children:n})}),Object(u.jsx)(l.CModalBody,{children:r}),Object(u.jsxs)(l.CModalFooter,{children:[Object(u.jsx)(l.CButton,{color:"primary",onClick:function(){return i&&i()},children:"Ok"})," ",c&&Object(u.jsx)(l.CButton,{color:"secondary",onClick:function(){return t.onCancel&&t.onCancel()},children:"Cancel"})]})]})}},{key:"show",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.setState({show:!0,title:t,text:e,onOk:n,withCancelButton:r}),console.log("ModalConfirmation::show")}},{key:"onCancel",value:function(){this.setState({show:!1}),console.log("ModalConfirmation::onCancel")}}]),n}(s.a.Component);e.a=d},703:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(187),o=n(188),i=n(689),c=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,[{key:"getAllForCurrentUser",value:function(t){return new Promise((function(e,n){fetch("".concat("http://54.38.240.29:3000","/").concat(t,"/cv/all")).then((function(t){return t.json()})).then((function(t){return e(t)}),(function(t){return n(t)}))}))}},{key:"getDetail",value:function(t,e){return new Promise((function(n,r){fetch("".concat("http://54.38.240.29:3000","/").concat(t,"/cv/item/").concat(e)).then((function(t){return t.json()})).then((function(t){return n(t)}),(function(t){return r(t)}))}))}},{key:"getDetailCore",value:function(t,e){return new Promise((function(n,r){fetch("".concat("http://54.38.240.29:3000","/").concat(t,"/cv/item/").concat(e,"/core")).then((function(t){return t.json()})).then((function(t){return n(t)}),(function(t){return r(t)}))}))}},{key:"createOrUpdateCore",value:function(t,e){var n=e.id?"edit":"add";console.log("CvService::createOrUpdateCore",e,n);var r="edit"==n?"PUT":"POST",o="edit"==n?e.id:"";return new Promise((function(n,i){fetch("".concat("http://54.38.240.29:3000","/").concat(t,"/cv/item/").concat(o),{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(t){return t.json()})).then((function(t){return n(t)}),(function(t){return i(t)}))}))}},{key:"addCvEducation",value:function(t,e,n){var r=Object(i.a)(n);return new Promise((function(n,o){fetch("".concat("http://54.38.240.29:3000","/").concat(t,"/cv/education/add/").concat(e,"/").concat(r)).then((function(t){return t.json()})).then((function(t){return n(t)}),(function(t){return o(t)}))}))}},{key:"addCvExperience",value:function(t,e,n){var r=Object(i.a)(n);return new Promise((function(n,o){fetch("".concat("http://54.38.240.29:3000","/").concat(t,"/cv/experience/add/").concat(e,"/").concat(r)).then((function(t){return t.json()})).then((function(t){return n(t)}),(function(t){return o(t)}))}))}},{key:"addCvSkill",value:function(t,e,n){var r=Object(i.a)(n);return new Promise((function(n,o){fetch("".concat("http://54.38.240.29:3000","/").concat(t,"/cv/skill/add/").concat(e,"/").concat(r)).then((function(t){return t.json()})).then((function(t){return n(t)}),(function(t){return o(t)}))}))}},{key:"addCvProject",value:function(t,e,n){var r=Object(i.a)(n);return new Promise((function(n,o){fetch("".concat("http://54.38.240.29:3000","/").concat(t,"/cv/project/add/").concat(e,"/").concat(r)).then((function(t){return t.json()})).then((function(t){return n(t)}),(function(t){return o(t)}))}))}}]),t}()},774:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return j}));var r=n(187),o=n(188),i=n(189),c=n(190),a=n(1),s=n.n(a),l=n(683),u=n(703),d=n(690),h=n(687),f=n(692),v=n(24),j=function(t){Object(i.a)(n,t);var e=Object(c.a)(n);function n(t){var o;return Object(r.a)(this,n),(o=e.call(this,t)).state={listCv:[],listCvForDatatable:[],fields:[],isoLang:"fr",refModalConfirm:null},o.cvService=new u.a,o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.isoLang;this.setState({isoLang:e}),this.cvService.getAllForCurrentUser(e).then((function(e){return t.setupDataToShow(e)}))}},{key:"render",value:function(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(l.CRow,{children:Object(v.jsx)(l.CCol,{children:this.renderCvList()})})})}},{key:"renderCvList",value:function(){var t=this,e=this.state,n=e.listCvForDatatable,r=e.fields;return Object(v.jsxs)("div",{children:[Object(v.jsxs)(l.CCard,{children:[Object(v.jsxs)(l.CCardHeader,{children:["Cv List",this.renderListHeader()]}),Object(v.jsx)(l.CCardBody,{children:Object(v.jsx)(l.CDataTable,{items:n,fields:r,hover:!0,striped:!0,loading:0==n.length,sorter:!0,columnFilter:!0,footer:!0,bordered:!0,size:"sm",itemsPerPage:10,pagination:!0,scopedSlots:{title:function(e,n){return t.renderCvTitleItem(e,n)},progress:function(e,n){return t.renderBadgeItem(e,n)},autoBiography:function(t,e){return Object(d.b)(t,e,"autoBiography")},actions:function(e,n){return Object(v.jsx)(d.a,{vertical:!0,item:e,index:n,clickHandlers:t.getClickHandlers(),viewDropdown:t.getDropdownDefs()})}}})})]}),Object(v.jsx)(f.a,{ref:function(e){return t.state.refModalConfirm=e}})]})}},{key:"renderListHeader",value:function(){var t=this;return Object(v.jsxs)("div",{className:"card-header-actions",children:[Object(v.jsx)(l.CTooltip,{content:"Add new CV",placement:"top",children:Object(v.jsxs)(l.CLink,{className:"card-header-action",onClick:function(){return t.props.history.push("/".concat(t.state.isoLang,"/cv/add"))},children:[Object(v.jsx)(h.a,{name:"cil-settings"})," "," "," Add"]})}),Object(v.jsx)("span",{dangerouslySetInnerHTML:{__html:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"}}),Object(v.jsx)(l.CTooltip,{content:"Show Download folder",placement:"top",children:Object(v.jsxs)(l.CLink,{className:"card-header-action",onClick:function(){return window.open("".concat("http://54.38.240.29:3000","/public/CvOutput/"))},children:[Object(v.jsx)(h.a,{name:"cil-settings"})," "," "," Download folder"]})})]})}},{key:"setupDataToShow",value:function(t){var e=[];Array.isArray(t)&&t.forEach((function(t){e.push({id:t.id,slug:t.slug,template:t.id_template,titleFrontend:t.langValues[0].titleFrontend,titleBackend:t.langValues[0].titleBackend,autoBiography:t.langValues[0].autoBiography,skillDescription:t.langValues[0].skillDescription,progress:t.progress})}));this.setState({listCv:t,listCvForDatatable:e,fields:["id",{key:"slug",label:"Slug",sorter:!0,filter:!0},{key:"title",sorter:!1,filter:!1},"autoBiography","progress",{key:"actions",sorter:!1,filter:!1}]})}},{key:"renderBadgeItem",value:function(t,e){return Object(v.jsx)("td",{children:Object(v.jsxs)(l.CBadge,{color:(n=t.progress,100===n?"success":n>80?"secondary":n>40?"warning":n>0?"danger":"primary"),children:[t.progress," %"]})});var n}},{key:"renderCvTitleItem",value:function(t,e){return Object(v.jsxs)("td",{children:[Object(v.jsx)("b",{children:Object(v.jsx)("em",{children:"Frontend:"})})," ",Object(v.jsx)("br",{}),Object(d.c)(t.titleFrontend),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:Object(v.jsx)("em",{children:"Backend:"})})," ",Object(v.jsx)("br",{}),Object(d.c)(t.titleBackend)]})}},{key:"getClickHandlers",value:function(){var t=this;return{viewHandler:function(e){return t.itemViewHandler(e)},downloadHandler:function(e){return t.itemDownloadHandler(e)},editHandler:function(e){return t.itemEditHandler(e)},deleteHandler:function(e){return t.itemDeleteHandler(e)}}}},{key:"itemViewHandler",value:function(t){console.log("CvList::itemViewHandler",t),this.props.history.push("/".concat(this.state.isoLang,"/cv/item/").concat(t.id))}},{key:"itemDownloadHandler",value:function(t){var e=this.state.refModalConfirm;console.log("CvList::itemDownloadHandler",t),e&&e.show("Download Cv","Are you sure to download this cv : '".concat(t.slug,"' (").concat(t.id,")?"),(function(){e&&e.onCancel()}))}},{key:"itemEditHandler",value:function(t){console.log("CvList::itemEditHandler",t),this.props.history.push("/".concat(this.state.isoLang,"/cv/item/").concat(t.id,"/edit"))}},{key:"itemDeleteHandler",value:function(t){var e=this.state.refModalConfirm;console.log("CvList::itemDeleteHandler",t),e&&e.show("Delete Cv","Are you sure to delete this cv : '".concat(t.slug,"' (").concat(t.id,")?"),(function(){e&&e.onCancel()}))}},{key:"itemViewDropdownViewCvHtmlHandler",value:function(t){window.open("".concat("http://54.38.240.29:3000","/").concat(this.state.isoLang,"/cv/").concat(t.id,"/template/template-1/generate/html/view"))}},{key:"itemViewDropdownViewCvJsonDataHandler",value:function(t){window.open("".concat("http://54.38.240.29:3000","/").concat(this.state.isoLang,"/cv/").concat(t.id,"/template/template-1/generate/html/view/json"))}},{key:"getDropdownDefs",value:function(){var t=this;return[{text:"View CV HTML",action:function(e){return t.itemViewDropdownViewCvHtmlHandler(e)}},{text:"View CV JsonData",action:function(e){return t.itemViewDropdownViewCvJsonDataHandler(e)}}]}}]),n}(s.a.Component)}}]);