(this["webpackJsonp@mahefa/cvmanager-ui"]=this["webpackJsonp@mahefa/cvmanager-ui"]||[]).push([[16],{693:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t){var n=null;if("string"===typeof e)n=e;else if(Array.isArray(e))n=o(e);else{if("undefined"!=typeof e)throw console.log("StringUtils::convertToStringAndToQueryParms, ids param type unkown",e),new Error("StringUtils::convertToStringAndToQueryParms, ids param type unkown");n=""}return void 0!==t&&null!==t?n?"".concat(t,"=").concat(n):"":n},o=function(e){return e.length>0?e.join(","):void 0}},694:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return f}));var r=n(189),o=n(190),c=n(191),i=n(192),a=n(1),s=n.n(a),u=n(687),l=n(24),d=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=(e.index,e.clickHandlers),r=e.vertical;return Object(l.jsx)("td",{children:Object(l.jsxs)(u.CButtonGroup,{vertical:r,style:{minWidth:r?78:null},children:[this.renderButtonView(t),n&&n.downloadHandler&&Object(l.jsx)(u.CButton,{color:"success",variant:"outline",shape:"square",size:"sm",onClick:function(){return n.downloadHandler(t)},children:"Download"}),Object(l.jsx)(u.CButton,{color:"primary",variant:"outline",shape:"square",size:"sm",onClick:function(){return n.editHandler(t)},children:"Edit"}),Object(l.jsx)(u.CButton,{color:"danger",variant:"outline",shape:"square",size:"sm",onClick:function(){return n.deleteHandler(t)},children:"Del"})]})})}},{key:"renderButtonView",value:function(e){var t=this.props,n=(t.index,t.clickHandlers),r=(t.vertical,t.viewDropdown),o=r&&Array.isArray(r)&&r.length>0,c=function(t){return Object(l.jsx)(u.CButton,{color:"primary",variant:1==t?"ghost":"outline",shape:"square",size:"sm",style:{width:"100%"},onClick:function(){return n.viewHandler(e)},children:"View"})};return o?Object(l.jsxs)(u.CDropdown,{children:[Object(l.jsx)(u.CDropdownToggle,{split:!0,color:"primary",variant:"outline",shape:"square",size:"sm",style:{padding:0},children:c(o)}),Object(l.jsx)(u.CDropdownMenu,{children:r.map((function(t){return Object(l.jsx)(u.CDropdownItem,{onClick:function(){return t.action(e)},children:t.text})}))})]}):c(o)}}]),n}(s.a.Component),h=function(e,t,n){return Object(l.jsx)("td",{children:e[n]?Object(l.jsx)("div",{dangerouslySetInnerHTML:{__html:e[n]}}):f(null)})},f=function(e){return e||Object(l.jsx)("em",{children:"(empty)"})}},696:function(e,t,n){"use strict";var r=n(189),o=n(190),c=n(191),i=n(192),a=n(1),s=n.n(a),u=n(687),l=n(24),d=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,c=new Array(o),i=0;i<o;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={show:!1,title:"",text:"",onOk:null,withCancelButton:!0},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.ref;e&&e(this)}},{key:"render",value:function(){var e=this,t=this.state,n=t.title,r=t.text,o=t.show,c=t.onOk,i=t.withCancelButton;return Object(l.jsxs)(u.CModal,{show:o,onClose:this.onCancel.bind(this),children:[Object(l.jsx)(u.CModalHeader,{closeButton:!0,children:Object(l.jsx)(u.CModalTitle,{children:n})}),Object(l.jsx)(u.CModalBody,{children:r}),Object(l.jsxs)(u.CModalFooter,{children:[Object(l.jsx)(u.CButton,{color:"primary",onClick:function(){return c&&c()},children:"Ok"})," ",i&&Object(l.jsx)(u.CButton,{color:"secondary",onClick:function(){return e.onCancel&&e.onCancel()},children:"Cancel"})]})]})}},{key:"show",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.setState({show:!0,title:e,text:t,onOk:n,withCancelButton:r}),console.log("ModalConfirmation::show")}},{key:"onCancel",value:function(){this.setState({show:!1}),console.log("ModalConfirmation::onCancel")}}]),n}(s.a.Component);t.a=d},707:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(189),o=n(190),c=n(693),i=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,[{key:"getAllForCurrentUser",value:function(e){return new Promise((function(t,n){fetch("".concat("https://api.manager.cv.wecours.com","/").concat(e,"/cv/all")).then((function(e){return e.json()})).then((function(e){return t(e)}),(function(e){return n(e)}))}))}},{key:"getDetail",value:function(e,t){return new Promise((function(n,r){fetch("".concat("https://api.manager.cv.wecours.com","/").concat(e,"/cv/item/").concat(t)).then((function(e){return e.json()})).then((function(e){return n(e)}),(function(e){return r(e)}))}))}},{key:"getDetailCore",value:function(e,t){return new Promise((function(n,r){fetch("".concat("https://api.manager.cv.wecours.com","/").concat(e,"/cv/item/").concat(t,"/core")).then((function(e){return e.json()})).then((function(e){return n(e)}),(function(e){return r(e)}))}))}},{key:"createOrUpdateCore",value:function(e,t){var n=t.id?"edit":"add";console.log("CvService::createOrUpdateCore",t,n);var r="edit"==n?"PUT":"POST",o="edit"==n?t.id:"";return new Promise((function(n,c){fetch("".concat("https://api.manager.cv.wecours.com","/").concat(e,"/cv/item/").concat(o),{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return n(e)}),(function(e){return c(e)}))}))}},{key:"addCvEducation",value:function(e,t,n){var r=Object(c.a)(n);return new Promise((function(n,o){fetch("".concat("https://api.manager.cv.wecours.com","/").concat(e,"/cv/education/add/").concat(t,"/").concat(r)).then((function(e){return e.json()})).then((function(e){return n(e)}),(function(e){return o(e)}))}))}},{key:"addCvExperience",value:function(e,t,n){var r=Object(c.a)(n);return new Promise((function(n,o){fetch("".concat("https://api.manager.cv.wecours.com","/").concat(e,"/cv/experience/add/").concat(t,"/").concat(r)).then((function(e){return e.json()})).then((function(e){return n(e)}),(function(e){return o(e)}))}))}},{key:"addCvSkill",value:function(e,t,n){var r=Object(c.a)(n);return new Promise((function(n,o){fetch("".concat("https://api.manager.cv.wecours.com","/").concat(e,"/cv/skill/add/").concat(t,"/").concat(r)).then((function(e){return e.json()})).then((function(e){return n(e)}),(function(e){return o(e)}))}))}},{key:"addCvProject",value:function(e,t,n){var r=Object(c.a)(n);return new Promise((function(n,o){fetch("".concat("https://api.manager.cv.wecours.com","/").concat(e,"/cv/project/add/").concat(t,"/").concat(r)).then((function(e){return e.json()})).then((function(e){return n(e)}),(function(e){return o(e)}))}))}}]),e}()},778:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var r=n(189),o=n(190),c=n(191),i=n(192),a=n(1),s=n.n(a),u=n(687),l=n(707),d=n(694),h=n(691),f=n(696),v=n(24),p=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var o;return Object(r.a)(this,n),(o=t.call(this,e)).state={listCv:[],listCvForDatatable:[],fields:[],isoLang:"fr",refModalConfirm:null},o.cvService=new l.a,o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.isoLang;this.setState({isoLang:t}),this.cvService.getAllForCurrentUser(t).then((function(t){return e.setupDataToShow(t)}))}},{key:"render",value:function(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(u.CRow,{children:Object(v.jsx)(u.CCol,{children:this.renderCvList()})})})}},{key:"renderCvList",value:function(){var e=this,t=this.state,n=t.listCvForDatatable,r=t.fields;return Object(v.jsxs)("div",{children:[Object(v.jsxs)(u.CCard,{children:[Object(v.jsxs)(u.CCardHeader,{children:["Cv List",this.renderListHeader()]}),Object(v.jsx)(u.CCardBody,{children:Object(v.jsx)(u.CDataTable,{items:n,fields:r,hover:!0,striped:!0,loading:0==n.length,sorter:!0,columnFilter:!0,footer:!0,bordered:!0,size:"sm",itemsPerPage:10,pagination:!0,scopedSlots:{title:function(t,n){return e.renderCvTitleItem(t,n)},progress:function(t,n){return e.renderBadgeItem(t,n)},autoBiography:function(e,t){return Object(d.b)(e,t,"autoBiography")},actions:function(t,n){return Object(v.jsx)(d.a,{vertical:!0,item:t,index:n,clickHandlers:e.getClickHandlers(),viewDropdown:e.getDropdownDefs()})}}})})]}),Object(v.jsx)(f.a,{ref:function(t){return e.state.refModalConfirm=t}})]})}},{key:"renderListHeader",value:function(){var e=this;return Object(v.jsxs)("div",{className:"card-header-actions",children:[Object(v.jsx)(u.CTooltip,{content:"Add new CV",placement:"top",children:Object(v.jsxs)(u.CLink,{className:"card-header-action",onClick:function(){return e.props.history.push("/".concat(e.state.isoLang,"/cv/add"))},children:[Object(v.jsx)(h.a,{name:"cil-settings"})," "," "," Add"]})}),Object(v.jsx)("span",{dangerouslySetInnerHTML:{__html:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"}}),Object(v.jsx)(u.CTooltip,{content:"Show Download folder",placement:"top",children:Object(v.jsxs)(u.CLink,{className:"card-header-action",onClick:function(){return window.open("".concat("https://api.manager.cv.wecours.com","/public/CvOutput/"))},children:[Object(v.jsx)(h.a,{name:"cil-settings"})," "," "," Download folder"]})})]})}},{key:"setupDataToShow",value:function(e){var t=[];Array.isArray(e)&&e.forEach((function(e){t.push({id:e.id,slug:e.slug,template:e.id_template,titleFrontend:e.langValues[0].titleFrontend,titleBackend:e.langValues[0].titleBackend,autoBiography:e.langValues[0].autoBiography,skillDescription:e.langValues[0].skillDescription,progress:e.progress})}));this.setState({listCv:e,listCvForDatatable:t,fields:["id",{key:"slug",label:"Slug",sorter:!0,filter:!0},{key:"title",sorter:!1,filter:!1},"autoBiography","progress",{key:"actions",sorter:!1,filter:!1}]})}},{key:"renderBadgeItem",value:function(e,t){return Object(v.jsx)("td",{children:Object(v.jsxs)(u.CBadge,{color:(n=e.progress,100===n?"success":n>80?"secondary":n>40?"warning":n>0?"danger":"primary"),children:[e.progress," %"]})});var n}},{key:"renderCvTitleItem",value:function(e,t){return Object(v.jsxs)("td",{children:[Object(v.jsx)("b",{children:Object(v.jsx)("em",{children:"Frontend:"})})," ",Object(v.jsx)("br",{}),Object(d.c)(e.titleFrontend),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("b",{children:Object(v.jsx)("em",{children:"Backend:"})})," ",Object(v.jsx)("br",{}),Object(d.c)(e.titleBackend)]})}},{key:"getClickHandlers",value:function(){var e=this;return{viewHandler:function(t){return e.itemViewHandler(t)},downloadHandler:function(t){return e.itemDownloadHandler(t)},editHandler:function(t){return e.itemEditHandler(t)},deleteHandler:function(t){return e.itemDeleteHandler(t)}}}},{key:"itemViewHandler",value:function(e){console.log("CvList::itemViewHandler",e),this.props.history.push("/".concat(this.state.isoLang,"/cv/item/").concat(e.id))}},{key:"itemDownloadHandler",value:function(e){var t=this.state.refModalConfirm;console.log("CvList::itemDownloadHandler",e),t&&t.show("Download Cv","Are you sure to download this cv : '".concat(e.slug,"' (").concat(e.id,")?"),(function(){t&&t.onCancel()}))}},{key:"itemEditHandler",value:function(e){console.log("CvList::itemEditHandler",e),this.props.history.push("/".concat(this.state.isoLang,"/cv/item/").concat(e.id,"/edit"))}},{key:"itemDeleteHandler",value:function(e){var t=this.state.refModalConfirm;console.log("CvList::itemDeleteHandler",e),t&&t.show("Delete Cv","Are you sure to delete this cv : '".concat(e.slug,"' (").concat(e.id,")?"),(function(){t&&t.onCancel()}))}},{key:"itemViewDropdownViewCvHtmlHandler",value:function(e){window.open("".concat("https://api.manager.cv.wecours.com","/").concat(this.state.isoLang,"/cv/").concat(e.id,"/template/template-1/generate/html/view"))}},{key:"itemViewDropdownViewCvJsonDataHandler",value:function(e){window.open("".concat("https://api.manager.cv.wecours.com","/").concat(this.state.isoLang,"/cv/").concat(e.id,"/template/template-1/generate/html/view/json"))}},{key:"getDropdownDefs",value:function(){var e=this;return[{text:"View CV HTML",action:function(t){return e.itemViewDropdownViewCvHtmlHandler(t)}},{text:"View CV JsonData",action:function(t){return e.itemViewDropdownViewCvJsonDataHandler(t)}}]}}]),n}(s.a.Component)}}]);