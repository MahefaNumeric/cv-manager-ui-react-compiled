(this["webpackJsonp@mahefa/cvmanager-ui"]=this["webpackJsonp@mahefa/cvmanager-ui"]||[]).push([[22],{690:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return p}));var o=n(187),r=n(188),i=n(189),a=n(190),c=n(1),s=n.n(c),l=n(683),u=n(24),d=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=(e.index,e.clickHandlers),o=e.vertical;return Object(u.jsx)("td",{children:Object(u.jsxs)(l.CButtonGroup,{vertical:o,style:{minWidth:o?78:null},children:[this.renderButtonView(t),n&&n.downloadHandler&&Object(u.jsx)(l.CButton,{color:"success",variant:"outline",shape:"square",size:"sm",onClick:function(){return n.downloadHandler(t)},children:"Download"}),Object(u.jsx)(l.CButton,{color:"primary",variant:"outline",shape:"square",size:"sm",onClick:function(){return n.editHandler(t)},children:"Edit"}),Object(u.jsx)(l.CButton,{color:"danger",variant:"outline",shape:"square",size:"sm",onClick:function(){return n.deleteHandler(t)},children:"Del"})]})})}},{key:"renderButtonView",value:function(e){var t=this.props,n=(t.index,t.clickHandlers),o=(t.vertical,t.viewDropdown),r=o&&Array.isArray(o)&&o.length>0,i=function(t){return Object(u.jsx)(l.CButton,{color:"primary",variant:1==t?"ghost":"outline",shape:"square",size:"sm",style:{width:"100%"},onClick:function(){return n.viewHandler(e)},children:"View"})};return r?Object(u.jsxs)(l.CDropdown,{children:[Object(u.jsx)(l.CDropdownToggle,{split:!0,color:"primary",variant:"outline",shape:"square",size:"sm",style:{padding:0},children:i(r)}),Object(u.jsx)(l.CDropdownMenu,{children:o.map((function(t){return Object(u.jsx)(l.CDropdownItem,{onClick:function(){return t.action(e)},children:t.text})}))})]}):i(r)}}]),n}(s.a.Component),h=function(e,t,n){return Object(u.jsx)("td",{children:e[n]?Object(u.jsx)("div",{dangerouslySetInnerHTML:{__html:e[n]}}):p(null)})},p=function(e){return e||Object(u.jsx)("em",{children:"(empty)"})}},692:function(e,t,n){"use strict";var o=n(187),r=n(188),i=n(189),a=n(190),c=n(1),s=n.n(c),l=n(683),u=n(24),d=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={show:!1,title:"",text:"",onOk:null,withCancelButton:!0},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.ref;e&&e(this)}},{key:"render",value:function(){var e=this,t=this.state,n=t.title,o=t.text,r=t.show,i=t.onOk,a=t.withCancelButton;return Object(u.jsxs)(l.CModal,{show:r,onClose:this.onCancel.bind(this),children:[Object(u.jsx)(l.CModalHeader,{closeButton:!0,children:Object(u.jsx)(l.CModalTitle,{children:n})}),Object(u.jsx)(l.CModalBody,{children:o}),Object(u.jsxs)(l.CModalFooter,{children:[Object(u.jsx)(l.CButton,{color:"primary",onClick:function(){return i&&i()},children:"Ok"})," ",a&&Object(u.jsx)(l.CButton,{color:"secondary",onClick:function(){return e.onCancel&&e.onCancel()},children:"Cancel"})]})]})}},{key:"show",value:function(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.setState({show:!0,title:e,text:t,onOk:n,withCancelButton:o}),console.log("ModalConfirmation::show")}},{key:"onCancel",value:function(){this.setState({show:!1}),console.log("ModalConfirmation::onCancel")}}]),n}(s.a.Component);t.a=d},718:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(187),r=n(188),i=function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,[{key:"getAllForCurrentUser",value:function(e){return new Promise((function(t,n){fetch("".concat("http://localhost:3000","/").concat(e,"/jobapp/all")).then((function(e){return e.json()})).then((function(e){return t(e)}),(function(e){return n(e)}))}))}},{key:"getDetail",value:function(e,t){return new Promise((function(n,o){fetch("".concat("http://localhost:3000","/").concat(e,"/jobapp/item/").concat(t)).then((function(e){return e.json()})).then((function(e){return n(e)}),(function(e){return o(e)}))}))}},{key:"createOrUpdate",value:function(e,t){var n=t.id?"edit":"add";console.log("JobAppService::createOrUpdate",t,n);var o="edit"==n?"PUT":"POST",r="edit"==n?t.id:"";return new Promise((function(n,i){fetch("".concat("http://localhost:3000","/").concat(e,"/jobapp/item/").concat(r),{method:o,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return n(e)}),(function(e){return i(e)}))}))}},{key:"delete",value:function(e,t){return new Promise((function(n,o){fetch("".concat("http://localhost:3000","/").concat(e,"/jobapp/item/").concat(t),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){return n(e)}),(function(e){return o(e)}))}))}}]),e}()},786:function(e,t,n){"use strict";n.r(t);var o=n(187),r=n(188),i=n(189),a=n(190),c=n(1),s=n.n(c),l=n(683),u=n(690),d=n(718),h=n(687),p=n(692),f=n(24),j=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={listJobapp:[],listJobappForDatatable:[],fields:[],isoLang:"fr",refModalConfirm:null},r.jobAppService=new d.a,r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.jobAppService.getAllForCurrentUser().then((function(t){return e.setupDataToShow(t)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.listJobappForDatatable,o=t.fields;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(l.CRow,{children:Object(f.jsx)(l.CCol,{children:Object(f.jsxs)(l.CCard,{children:[Object(f.jsxs)(l.CCardHeader,{children:["Job Application List",this.renderListHeader()]}),Object(f.jsx)(l.CCardBody,{children:Object(f.jsx)(l.CDataTable,{items:n,fields:o,hover:!0,sorter:!0,columnFilter:!0,footer:!0,striped:!0,bordered:!0,size:"sm",itemsPerPage:10,pagination:!0,scopedSlots:{actions:function(t,n){return Object(f.jsx)(u.a,{item:t,index:n,clickHandlers:e.getClickHandlers()})}}})})]})})}),Object(f.jsx)(p.a,{ref:function(t){return e.state.refModalConfirm=t}})]})}},{key:"setupDataToShow",value:function(e){var t=this;console.log("setupDataToShow",e);var n=[];Array.isArray(e)&&e.forEach((function(e){n.push({id:e.id,slug:e.slug,urlPub:e.urlPub,slugCompany:e.company.slug,slugPosition:e.position.slug,state:t.getRandomState()})}));this.setState({listJobapp:e,listJobappForDatatable:n,fields:["id",{key:"slug",label:"Slug",sorter:!1,filter:!1},"urlPub",{key:"slugCompany",label:"Company",sorter:!0,filter:!0},{key:"slugPosition",label:"Position",sorter:!0,filter:!0},"state","actions"]})}},{key:"renderBadgeItem",value:function(e,t){return Object(f.jsx)("td",{children:Object(f.jsxs)(l.CBadge,{color:(n=e.progress,100===n?"success":n>80?"secondary":n>40?"warning":n>0?"danger":"primary"),children:[e.progress," %"]})});var n}},{key:"getClickHandlers",value:function(){var e=this;return{viewHandler:function(t){return e.itemViewHandler(t)},editHandler:function(t){return e.itemEditHandler(t)},deleteHandler:function(t){return e.itemDeleteHandler(t)}}}},{key:"itemViewHandler",value:function(e){console.log("JobAppList::itemViewHandler",e),this.props.history.push("/".concat(this.state.isoLang,"/jobapp/").concat(e.id))}},{key:"itemEditHandler",value:function(e){console.log("JobAppList::itemEditHandler",e),this.props.history.push("/".concat(this.state.isoLang,"/jobapp/").concat(e.id,"/edit"))}},{key:"itemDeleteHandler",value:function(e){var t=this,n=this.state.refModalConfirm;console.log("JobAppList::itemDeleteHandler",e,n),n&&n.show("Delete element","Are you sure to delete this item : '".concat(e.slug,"' with id=").concat(e.id,"?"),(function(){n&&n.onCancel(),console.log("JobAppList::itemDeleteHandler, Delete item with id=".concat(e.id)),t.jobAppService.delete(t.state.isoLang,e.id).then((function(e){return window.location.reload()}))}))}},{key:"renderListHeader",value:function(){var e=this;return Object(f.jsx)("div",{className:"card-header-actions",children:Object(f.jsx)(l.CTooltip,{content:"Add new JobApp",placement:"top",children:Object(f.jsxs)(l.CLink,{className:"card-header-action",onClick:function(){return e.props.history.push("/".concat(e.state.isoLang,"/position/add"))},children:[Object(f.jsx)(h.a,{name:"cil-settings"})," "," "," Add"]})})})}},{key:"getRandomState",value:function(){var e=Math.ceil(3*Math.random());return["Envoy\xe9e","Ok","Refus\xe9e"][e=0===e?e:1]}}]),n}(s.a.Component);t.default=j}}]);